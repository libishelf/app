<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LibiShelf | Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; overflow: hidden; height: 100vh; margin: 0; }
        
        /* The sidebar is fixed and never moves */
        #sidebar { width: 280px; height: 100vh; background: white; border-right: 1px solid #e2e8f0; display: flex; flex-direction: column; z-index: 50; }
        
        /* Darker Active State - No reload needed to change this */
        .nav-btn.active { background-color: #0f172a; color: white; box-shadow: 0 10px 15px -3px rgba(15, 23, 42, 0.2); }
        .nav-btn.active span { filter: brightness(0) invert(1); }
        .nav-btn:not(.active):hover { background-color: #f1f5f9; }

        /* The window for the other files */
        #content-window { flex: 1; height: 100vh; border: none; background: #fcfcfd; }
    </style>
</head>
<body class="flex">

    <!-- SIDEBAR: THIS NEVER RELOADS -->
    <aside id="sidebar">
        <div class="p-8 flex items-center gap-3">
            <div class="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center text-white font-black text-xl">L</div>
            <span class="font-black text-xl tracking-tighter text-slate-800">LibiShelf</span>
        </div>

        <nav class="flex-1 px-4 space-y-1.5 mt-2">
            <p class="text-[10px] font-bold text-slate-400 uppercase px-4 mb-2 tracking-[0.2em]">Menu</p>
            
            <button onclick="switchView('dashboard.html', 'dashboard')" id="btn-dashboard" class="nav-btn active w-full flex items-center gap-3 px-4 py-4 rounded-2xl text-sm font-bold text-slate-500 transition-all duration-200">
                <span class="text-lg">üè†</span> Dashboard
            </button>
            
            <button onclick="switchView('catalog.html', 'catalog')" id="btn-catalog" class="nav-btn w-full flex items-center gap-3 px-4 py-4 rounded-2xl text-sm font-bold text-slate-500 transition-all duration-200">
                <span class="text-lg">üìö</span> Catalog
            </button>
            
            <button onclick="switchView('lending.html', 'lending')" id="btn-lending" class="nav-btn w-full flex items-center gap-3 px-4 py-4 rounded-2xl text-sm font-bold text-slate-500 transition-all duration-200">
                <span class="text-lg">üîÑ</span> Lending
            </button>
        </nav>

        <div class="p-6 border-t border-slate-100">
            <button onclick="window.location.href='../login_index.html'" class="w-full flex items-center gap-3 px-4 py-3 rounded-2xl text-sm font-bold text-red-500 hover:bg-red-50 transition-all">
                <span>üö™</span> Logout
            </button>
        </div>
    </aside>

    <!-- CONTENT AREA: ONLY THIS PART RELOADS CONTENT -->
    <main class="flex-1 flex flex-col h-screen overflow-hidden">
        <header class="h-20 bg-white border-b border-slate-200 flex items-center px-10 justify-between shrink-0">
            <h2 id="view-title" class="font-black text-slate-800 text-xl tracking-tight">Dashboard</h2>
            <div id="school-tag" class="text-xs font-bold text-slate-400 bg-slate-50 px-4 py-2 rounded-full border border-slate-100">
                School Library
            </div>
        </header>

        <!-- The actual iFrame window -->
        <iframe id="content-window" src="dashboard.html"></iframe>
    </main>

    <script>
        // Update school name from session
        const user = JSON.parse(sessionStorage.getItem('libi_user') || '{}');
        if(user.schoolName) document.getElementById('school-tag').innerText = user.schoolName;

        function switchView(fileName, pageId) {
            // 1. Tell the iframe to load the new file
            document.getElementById('content-window').src = fileName;

            // 2. Clear all "active" (dark) states from buttons
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));

            // 3. Set the clicked button to "active" (dark)
            document.getElementById('btn-' + pageId).classList.add('active');

            // 4. Update the header title
            const titles = { dashboard: 'Dashboard', catalog: 'Catalog', lending: 'Lending & Returns' };
            document.getElementById('view-title').innerText = titles[pageId];
        }
    </script>
</body>
</html>
